<scope doc="This module discovers the connectivity between OpenFlow&#xA;switches by sending out LLDP packets." ilk="blob" lang="Python" name="discovery" src="/home/mininet/new_pox/pox/pox/openflow/discovery.py"><import line="29" module="pox.lib.revent" symbol="*" /><import line="30" module="pox.lib.recoco" symbol="Timer" /><import line="31" module="pox.lib.util" symbol="dpid_to_str" /><import line="31" module="pox.lib.util" symbol="str_to_bool" /><import line="32" module="pox.core" symbol="core" /><import alias="of" line="33" module="pox.openflow.libopenflow_01" /><import alias="pkt" line="34" module="pox.lib.packet" /><import line="36" module="struct" /><import line="37" module="time" /><import line="38" module="collections" symbol="namedtuple" /><import line="39" module="random" symbol="shuffle" /><variable citdl="core.getLogger()" line="41" name="log" /><scope classrefs="object" doc="Sends out discovery packets" ilk="class" line="44" lineend="174" name="LLDPSender"><variable citdl="namedtuple()" line="49" name="SendItem" /><scope attributes="__ctor__" doc="Initialize an LLDP packet sender&#xA;&#xA;send_cycle_time is the time (in seconds) that this sender will take to&#xA;  send every discovery packet.  Thus, it should be the link timeout&#xA;  interval at most.&#xA;&#xA;ttl is the time (in seconds) for which a receiving LLDP agent should&#xA;  consider the rest of the data to be valid.  We don&apos;t use this, but&#xA;  other LLDP agents might.  Can&apos;t be 0 (this means revoke)." ilk="function" line="55" lineend="76" name="__init__" signature="LLDPSender(send_cycle_time, ttl=120)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="send_cycle_time" /><variable citdl="int" ilk="argument" name="ttl" /></scope><variable attributes="protected __instancevar__" citdl="list" line="68" name="_this_cycle" /><variable attributes="protected __instancevar__" citdl="list" line="71" name="_next_cycle" /><variable attributes="protected __instancevar__" citdl="Timer()" line="73" name="_timer" /><variable attributes="protected __instancevar__" citdl="int" line="74" name="_ttl" /><variable attributes="protected __instancevar__" line="75" name="_send_cycle_time" /><scope attributes="protected" doc="Track changes to switch ports" ilk="function" line="78" lineend="85" name="_handle_openflow_PortStatus" signature="_handle_openflow_PortStatus(event)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="event" /></scope><scope attributes="protected" ilk="function" line="87" lineend="95" name="_handle_openflow_ConnectionUp" signature="_handle_openflow_ConnectionUp(event)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="event" /><variable citdl="list" line="90" name="ports" /></scope><scope attributes="protected" ilk="function" line="97" lineend="98" name="_handle_openflow_ConnectionDown" signature="_handle_openflow_ConnectionDown(event)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="event" /></scope><scope ilk="function" line="100" lineend="103" name="del_switch" signature="del_switch(dpid, set_timer=True)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /><variable citdl="True" ilk="argument" name="set_timer" /></scope><scope ilk="function" line="105" lineend="111" name="del_port" signature="del_port(dpid, port_num, set_timer=True)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /><variable ilk="argument" name="port_num" /><variable citdl="True" ilk="argument" name="set_timer" /></scope><scope ilk="function" line="113" lineend="118" name="add_port" signature="add_port(dpid, port_num, port_addr, set_timer=True)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /><variable ilk="argument" name="port_num" /><variable ilk="argument" name="port_addr" /><variable citdl="True" ilk="argument" name="set_timer" /></scope><scope attributes="protected" ilk="function" line="120" lineend="126" name="_set_timer" signature="_set_timer()"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable citdl="len()" line="123" name="num_packets" /></scope><scope attributes="protected" doc="Called by a timer to actually send packets.&#xA;&#xA;Picks the first packet off this cycle&apos;s list, sends it, and then puts&#xA;it on the next-cycle list.  When this cycle&apos;s list is empty, starts&#xA;the next cycle." ilk="function" line="128" lineend="142" name="_timer_handler" signature="_timer_handler()"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable citdl="self._this_cycle.pop()" line="140" name="item" /></scope><scope doc="Build discovery packet" ilk="function" line="144" lineend="174" name="create_discovery_packet" returns="po.pack()" signature="create_discovery_packet(dpid, port_num, port_addr)"><variable citdl="LLDPSender" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /><variable ilk="argument" name="port_num" /><variable ilk="argument" name="port_addr" /><variable citdl="pkt.chassis_id()" line="149" name="chassis_id" /><variable citdl="pkt.port_id()" line="153" name="port_id" /><variable citdl="pkt.ttl()" line="155" name="ttl" /><variable citdl="pkt.system_description()" line="157" name="sysdesc" /><variable citdl="pkt.lldp()" line="160" name="discovery_packet" /><variable citdl="pkt.ethernet()" line="167" name="eth" /><variable citdl="of.ofp_packet_out()" line="172" name="po" /></scope></scope><scope classrefs="Event" doc="Link up/down event" ilk="class" line="177" lineend="192" name="LinkEvent"><scope attributes="__ctor__" ilk="function" line="181" lineend="185" name="__init__" signature="LinkEvent(add, link)"><variable citdl="LinkEvent" ilk="argument" name="self" /><variable ilk="argument" name="add" /><variable ilk="argument" name="link" /></scope><variable attributes="__instancevar__" line="183" name="link" /><variable attributes="__instancevar__" line="184" name="added" /><variable attributes="__instancevar__" citdl="bool" line="185" name="removed" /><scope ilk="function" line="187" lineend="192" name="port_for_dpid" returns="self.link.port1" signature="port_for_dpid(dpid)"><variable citdl="LinkEvent" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /></scope></scope><scope classrefs="EventMixin" doc="Component that attempts to discover network toplogy.&#xA;&#xA;Sends out specially-crafted LLDP packets, and monitors their arrival." ilk="class" line="195" lineend="411" name="Discovery"><variable attributes="protected" citdl="int" line="202" name="_flow_priority" /><variable attributes="protected" citdl="int" line="203" name="_link_timeout" /><variable attributes="protected" citdl="int" line="204" name="_timeout_check_period" /><variable attributes="protected" citdl="set()" line="206" name="_eventMixin_events" /><variable attributes="protected" citdl="str" line="210" name="_core_name" /><variable citdl="namedtuple()" line="212" name="Link" /><scope attributes="__ctor__" ilk="function" line="214" lineend="228" name="__init__" signature="Discovery(install_flow=True, explicit_drop=True, link_timeout=None, eat_early_packets=False)"><variable citdl="Discovery" ilk="argument" name="self" /><variable citdl="True" ilk="argument" name="install_flow" /><variable citdl="True" ilk="argument" name="explicit_drop" /><variable ilk="argument" name="link_timeout" /><variable citdl="False" ilk="argument" name="eat_early_packets" /></scope><variable attributes="protected __instancevar__" citdl="False" line="216" name="_eat_early_packets" /><variable attributes="protected __instancevar__" citdl="True" line="217" name="_explicit_drop" /><variable attributes="protected __instancevar__" citdl="True" line="218" name="_install_flow" /><variable attributes="__instancevar__" citdl="dict" line="221" name="adjacency" /><variable attributes="protected __instancevar__" citdl="LLDPSender" line="222" name="_sender" /><variable attributes="property" line="231" name="send_cycle_time" /><scope attributes="__hidden__" ilk="function" line="231" lineend="232" name="send_cycle_time (property getter)" signature="send_cycle_time (property getter)()"><variable citdl="Discovery" ilk="argument" name="self" /></scope><scope attributes="protected" ilk="function" line="234" lineend="244" name="_handle_openflow_ConnectionUp" signature="_handle_openflow_ConnectionUp(event)"><variable citdl="Discovery" ilk="argument" name="self" /><variable ilk="argument" name="event" /><variable citdl="of.ofp_match()" line="238" name="match" /><variable citdl="of.ofp_flow_mod()" line="240" name="msg" /></scope><scope attributes="protected" ilk="function" line="246" lineend="250" name="_handle_openflow_ConnectionDown" signature="_handle_openflow_ConnectionDown(event)"><variable citdl="Discovery" ilk="argument" name="self" /><variable ilk="argument" name="event" /></scope><scope attributes="protected" doc="Remove apparently dead links" ilk="function" line="252" lineend="266" name="_expire_links" signature="_expire_links()"><variable citdl="Discovery" ilk="argument" name="self" /><variable citdl="time.time()" line="256" name="now" /><variable citdl="list" line="258" name="expired" /></scope><scope attributes="protected" doc="Receive and process LLDP packets" ilk="function" line="268" lineend="395" name="_handle_openflow_PacketIn" returns="EventHalt" signature="_handle_openflow_PacketIn(event)"><variable citdl="Discovery" ilk="argument" name="self" /><variable ilk="argument" name="event" /><variable citdl="event.parsed" line="273" name="packet" /><variable citdl="time.time()" line="279" name="enable_time" /><variable citdl="of.ofp_packet_out()" line="287" name="msg" /><variable citdl="packet.find()" line="292" name="lldph" /><scope ilk="function" line="309" lineend="327" name="lookInSysDesc" returns="int()" signature="lookInSysDesc()"><variable line="310" name="r" /></scope><variable citdl="int()" line="329" name="originatorDPID" /><variable line="346" name="s" /><variable citdl="int()" line="363" name="originatorPort" /><variable citdl="Link()" line="382" name="link" /></scope><scope attributes="protected" ilk="function" line="397" lineend="400" name="_delete_links" signature="_delete_links(links)"><variable citdl="Discovery" ilk="argument" name="self" /><variable ilk="argument" name="links" /></scope><scope doc="Return True if given port does not connect to another switch" ilk="function" line="402" lineend="411" name="is_edge_port" returns="bool" signature="is_edge_port(dpid, port)"><variable citdl="Discovery" ilk="argument" name="self" /><variable ilk="argument" name="dpid" /><variable ilk="argument" name="port" /></scope></scope><scope ilk="function" line="414" lineend="423" name="launch" signature="launch(no_flow=False, explicit_drop=True, link_timeout=None, eat_early_packets=False)"><variable citdl="False" ilk="argument" name="no_flow" /><variable citdl="str_to_bool()" ilk="argument" name="explicit_drop" /><variable citdl="int()" ilk="argument" name="link_timeout" /><variable citdl="str_to_bool()" ilk="argument" name="eat_early_packets" /><variable citdl="bool" line="418" name="install_flow" /></scope></scope>