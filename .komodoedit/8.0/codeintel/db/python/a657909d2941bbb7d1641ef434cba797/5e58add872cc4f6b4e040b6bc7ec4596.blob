<scope doc="Creates a spanning tree." ilk="blob" lang="Python" name="spanning_tree" src="/home/mininet/new_pox/pox/pox/openflow/spanning_tree.py"><import line="36" module="pox.core" symbol="core" /><import alias="of" line="37" module="pox.openflow.libopenflow_01" /><import line="38" module="pox.lib.revent" symbol="*" /><import line="39" module="collections" symbol="defaultdict" /><import line="40" module="pox.openflow.discovery" symbol="Discovery" /><import line="41" module="pox.lib.util" symbol="dpidToStr" /><import line="42" module="pox.lib.recoco" symbol="Timer" /><import line="43" module="time" /><variable citdl="core.getLogger()" line="45" name="log" /><scope attributes="protected" doc="Calculates the actual spanning tree&#xA;&#xA;Returns it as dictionary where the keys are DPID1, and the&#xA;values are tuples of (DPID2, port-num), where port-num&#xA;is the port on DPID1 connecting to DPID2." ilk="function" line="50" lineend="120" name="_calc_spanning_tree" returns="defaultdict()" signature="_calc_spanning_tree()"><scope ilk="function" line="58" lineend="59" name="flip" returns="Discovery.Link()" signature="flip(link)"><variable ilk="argument" name="link" /></scope><variable citdl="defaultdict()" line="61" name="adj" /><variable citdl="set()" line="62" name="switches" /><variable citdl="True" line="77" name="good" /><variable citdl="list" line="91" name="q" /><variable citdl="set()" line="92" name="more" /><variable citdl="set()" line="94" name="done" /><variable citdl="defaultdict()" line="96" name="tree" /><variable citdl="q.pop()" line="102" name="v" /></scope><variable attributes="protected" citdl="defaultdict()" line="127" name="_prev" /><variable attributes="protected" citdl="False" line="130" name="_noflood_by_default" /><variable attributes="protected" citdl="False" line="134" name="_hold_down" /><scope attributes="protected" ilk="function" line="137" lineend="156" name="_handle_ConnectionUp" signature="_handle_ConnectionUp(event)"><variable ilk="argument" name="event" /><variable citdl="event.connection" line="142" name="con" /><variable citdl="of.ofp_port_mod()" line="147" name="pm" /><variable citdl="Timer()" line="155" name="t" /></scope><scope attributes="protected" ilk="function" line="159" lineend="161" name="_handle_LinkEvent" signature="_handle_LinkEvent(event)"><variable ilk="argument" name="event" /></scope><scope attributes="protected" doc="Update spanning tree&#xA;&#xA;force_dpid specifies a switch we want to update even if we are supposed&#xA;to be holding down changes." ilk="function" line="164" lineend="224" name="_update_tree" signature="_update_tree(force_dpid=None)"><variable ilk="argument" name="force_dpid" /><variable citdl="_calc_spanning_tree()" line="173" name="tree" /><variable citdl="time.time()" line="179" name="enable_time" /><variable citdl="int" line="183" name="change_count" /><variable citdl="core.openflow.getConnection()" line="185" name="con" /><variable citdl="list" line="198" name="tree_ports" /><variable citdl="True" line="201" name="flood" /><variable citdl="of.ofp_port_mod()" line="213" name="pm" /></scope><variable attributes="protected" citdl="dict" line="227" name="_dirty_switches" /><variable attributes="protected" citdl="int" line="228" name="_coalesce_period" /><scope attributes="protected" doc="Registers the fact that port info for dpid may be out of date&#xA;&#xA;When the spanning tree adjusts the port flags, the port config bits&#xA;we keep in the Connection become out of date.  We don&apos;t want to just&#xA;set them locally because an in-flight port status message could&#xA;overwrite them.  We also might not want to assume they get set the&#xA;way we want them.  SO, we do send a features request, but we wait a&#xA;moment before sending it so that we can potentially coalesce several.&#xA;&#xA;TLDR: Port information for this switch may be out of date for around&#xA;      _coalesce_period seconds." ilk="function" line="230" lineend="248" name="_invalidate_ports" signature="_invalidate_ports(dpid)"><variable ilk="argument" name="dpid" /><variable citdl="Timer()" line="247" name="t" /></scope><scope attributes="protected" doc="Sends a features request to the given dpid" ilk="function" line="250" lineend="259" name="_check_ports" signature="_check_ports(dpid)"><variable ilk="argument" name="dpid" /><variable citdl="core.openflow.getConnection()" line="255" name="con" /></scope><scope ilk="function" line="262" lineend="273" name="launch" signature="launch(no_flood=False, hold_down=False)"><variable citdl="False" ilk="argument" name="no_flood" /><variable citdl="False" ilk="argument" name="hold_down" /><variable attributes="protected" citdl="True" line="265" name="_noflood_by_default" /><variable attributes="protected" citdl="True" line="267" name="_hold_down" /><scope ilk="function" line="269" lineend="272" name="start_spanning_tree" signature="start_spanning_tree()" /></scope></scope>